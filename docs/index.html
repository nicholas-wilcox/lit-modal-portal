<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Lit Modal Portal Documentation</title><meta name="description" content="Documentation for Lit Modal Portal Documentation"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Lit Modal Portal Documentation</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>Lit Modal Portal Documentation</h1></div><div class="tsd-panel tsd-typography"><a id="lit-modal-portal" class="tsd-anchor"></a><h1 class="tsd-anchor-link">lit-modal-portal<a href="#lit-modal-portal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>The <code>lit-modal-portal</code> package provides a <a href="https://lit.dev/docs/templates/custom-directives/">custom Lit directive</a>, <code>portal</code>, that renders a Lit template elsewhere in the DOM.
Its main goals are:</p>
<ol>
<li>to provide an API that is similar to React's <a href="https://react.dev/reference/react-dom/createPortal"><code>createPortal</code></a> function, and</li>
<li>to rely on the existing Lit API wherever possible.</li>
</ol>
<p>This package also supports <em>asynchronous</em> portal content.</p>
<a id="warning-notice-on-version-06" class="tsd-anchor"></a><h2 class="tsd-anchor-link">:warning: Notice on version 0.6<a href="#warning-notice-on-version-06" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This package was heavily altered between versions 0.4 and 0.6.
Changes include:</p>
<ul>
<li>Add support for Lit v3 and fixed dependency declaration for v0.5. (Thanks, <a href="https://github.com/klasjersevi">klasjersevi</a>.)</li>
<li>Removed the following code:
<ul>
<li>Dependency of the <a href="https://www.npmjs.com/package/immutable">immutable</a> package.</li>
<li>The <code>&lt;modal-portal&gt;</code> component and the singleton <code>modalController</code>.</li>
<li>All pre-made components, such as the <code>&lt;confirm-modal&gt;</code>.</li>
</ul>
</li>
<li>Refactor the <code>portal</code> directive to use Lit's <code>render</code> function.
<ul>
<li>This was primarily inspired by <a href="https://github.com/ronak-lm">ronak-lm</a>'s <a href="https://www.npmjs.com/package/lit-portal">lit-portal</a> package, which more closely resembles React's portal API than previous versions of this package.</li>
<li>This simplifies usage of the package and expands the potential use cases.</li>
</ul>
</li>
</ul>
<a id="installation-and-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation and Usage<a href="#installation-and-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can install <code>lit-modal-portal</code> via NPM.</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> </span><span class="hl-0">lit</span><span class="hl-1">-</span><span class="hl-0">modal</span><span class="hl-1">-</span><span class="hl-0">portal</span>
</code><button>Copy</button></pre>

<p>Suppose we have the following Lit application:</p>
<pre><code class="html"><span class="hl-2">&lt;!-- index.html --&gt;</span><br/><span class="hl-3">&lt;!</span><span class="hl-4">doctype</span><span class="hl-1"> </span><span class="hl-5">html</span><span class="hl-3">&gt;</span><br/><span class="hl-3">&lt;</span><span class="hl-4">html</span><span class="hl-3">&gt;</span><br/><span class="hl-1">  </span><span class="hl-3">&lt;</span><span class="hl-4">head</span><span class="hl-3">&gt;</span><br/><span class="hl-1">    </span><span class="hl-3">&lt;</span><span class="hl-4">title</span><span class="hl-3">&gt;</span><span class="hl-1">lit-modal-portal Usage Example</span><span class="hl-3">&lt;/</span><span class="hl-4">title</span><span class="hl-3">&gt;</span><br/><span class="hl-1">    </span><span class="hl-2">&lt;!-- Your bundle/script --&gt;</span><br/><span class="hl-1">    </span><span class="hl-3">&lt;</span><span class="hl-4">script</span><span class="hl-6"> </span><span class="hl-5">type</span><span class="hl-6">=</span><span class="hl-7">&quot;module&quot;</span><span class="hl-6"> </span><span class="hl-5">src</span><span class="hl-6">=</span><span class="hl-7">&quot;main.js&quot;</span><span class="hl-3">&gt;&lt;/</span><span class="hl-4">script</span><span class="hl-3">&gt;</span><br/><span class="hl-1">  </span><span class="hl-3">&lt;/</span><span class="hl-4">head</span><span class="hl-3">&gt;</span><br/><span class="hl-1">  </span><span class="hl-3">&lt;</span><span class="hl-4">body</span><span class="hl-3">&gt;</span><br/><span class="hl-1">    </span><span class="hl-2">&lt;!-- Your custom element --&gt;</span><br/><span class="hl-1">    </span><span class="hl-3">&lt;</span><span class="hl-4">app-root</span><span class="hl-3">&gt;&lt;/</span><span class="hl-4">app-root</span><span class="hl-3">&gt;</span><br/><span class="hl-1">  </span><span class="hl-3">&lt;/</span><span class="hl-4">body</span><span class="hl-3">&gt;</span><br/><span class="hl-3">&lt;/</span><span class="hl-4">html</span><span class="hl-3">&gt;</span>
</code><button type="button">Copy</button></pre>

<pre><code class="js"><span class="hl-2">// index.ts (source code for main.js)</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">LitElement</span><span class="hl-1">, </span><span class="hl-0">html</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">customElement</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit/decorators.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">portal</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit-modal-portal&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-10">customElement</span><span class="hl-1">(</span><span class="hl-9">&#39;app-root&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-11">class</span><span class="hl-1"> </span><span class="hl-12">AppRoot</span><span class="hl-1"> </span><span class="hl-11">extends</span><span class="hl-1"> </span><span class="hl-12">LitElement</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-10">render</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-10">html</span><span class="hl-9">`</span><br/><span class="hl-9">      &lt;h1&gt;lit-modal-portal Usage Example&lt;/h1&gt;</span><br/><span class="hl-9">      </span><span class="hl-11">${</span><span class="hl-10">portal</span><span class="hl-6">(</span><span class="hl-10">html</span><span class="hl-9">`&lt;p&gt;portal content&lt;/p&gt;`</span><span class="hl-6">, </span><span class="hl-0">document</span><span class="hl-6">.</span><span class="hl-0">body</span><span class="hl-6">)</span><span class="hl-11">}</span><br/><span class="hl-9">    `</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>When the <code>&lt;app-root&gt;</code> component renders, it will activate the <code>portal</code> directive, which will return <code>nothing</code> but use Lit's API to asynchronously render the content in a container <code>&lt;div&gt;</code> and append that container to <code>document.body</code>.</p>
<p>When the portal's content is updated, the directive will re-render the new content in the same container. Additionally, if the target changes, then the container will be removed from the old target and appended to the new target.</p>
<a id="api" class="tsd-anchor"></a><h2 class="tsd-anchor-link">API<a href="#api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-11">type</span><span class="hl-1"> </span><span class="hl-12">TargetOrSelector</span><span class="hl-1"> = </span><span class="hl-12">Node</span><span class="hl-1"> | </span><span class="hl-12">string</span><span class="hl-1">;</span><br/><br/><span class="hl-11">type</span><span class="hl-1"> </span><span class="hl-12">PortalOptions</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-0">placeholder</span><span class="hl-1">?: </span><span class="hl-12">unknown</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">modifyContainer</span><span class="hl-1">?: (</span><span class="hl-0">container</span><span class="hl-1">: </span><span class="hl-12">HTMLElement</span><span class="hl-1">) </span><span class="hl-11">=&gt;</span><span class="hl-1"> </span><span class="hl-12">void</span><span class="hl-1">;</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-10">portal</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">content</span><span class="hl-1">: </span><span class="hl-0">unknown</span><span class="hl-1"> | </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-0">unknown</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">  </span><span class="hl-0">targetOrSelector</span><span class="hl-1">: </span><span class="hl-0">TargetOrSelector</span><span class="hl-1"> | </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-0">TargetOrSelector</span><span class="hl-1">&gt;,</span><br/><span class="hl-1">  </span><span class="hl-0">options</span><span class="hl-1">?: </span><span class="hl-0">PortalOptions</span><span class="hl-1">,</span><br/><span class="hl-1">): </span><span class="hl-0">DirectiveResult</span><span class="hl-1">&lt;</span><span class="hl-11">typeof</span><span class="hl-1"> </span><span class="hl-0">PortalDirective</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Parameters:</p>
<ul>
<li>
<p><code>content</code>: The content of the portal. This parameter is passed as the <code>value</code> parameter in <a href="https://lit.dev/docs/api/templates/#render">Lit's <code>render</code> function</a>.</p>
<blockquote>
<p>Any renderable value typically a <a href="https://lit.dev/docs/api/templates/#TemplateResult"><code>TemplateResult</code></a>
created by evaluating a template tag like <a href="https://lit.dev/docs/api/templates/#html"><code>html</code></a> or <a href="https://lit.dev/docs/api/templates/#svg"><code>svg</code></a>.</p>
</blockquote>
</li>
<li>
<p><code>targetOrSelector</code>: An element or a string that identifies the portal's target.</p>
<p>If the value is a string, then it is treated as a query selector and passed to <code>document.querySelector()</code> in order to locate the portal target.
If no element is found with the selector, then an error is thrown.</p>
</li>
<li>
<p><code>options</code>: Configuration parameters for the portal.</p>
<ul>
<li>
<p><code>placeholder</code>: A value that will be rendered while the <code>content</code> is resolving.</p>
</li>
<li>
<p><code>modifyContainer</code>: A function that will be called with the portal's container provided as an argument.
This allows you to programmatically control the container before the portal renders.</p>
</li>
</ul>
</li>
</ul>
<p>This function will always return <a href="https://lit.dev/docs/api/templates/#nothing">Lit's <code>nothing</code> value</a>, because nothing is supposed to render where the portal is used.</p>
<p>Both the <code>content</code> and the <code>targetOrSelector</code> parameters may be promises.
The <code>targetOrSelector</code> must resolve before the portal renders.</p>
<p>If the <code>content</code> is a promise, then an optional <code>placeholder</code> may be provided.
If no <code>placeholder</code> is provided, then the portal will not render until the <code>content</code> resolves.</p>
<p>See <a href="https://nicholas-wilcox.github.io/lit-modal-portal/classes/PortalDirective.html#render">the docs</a> for more information on how the <code>portal</code> directive works.</p>
<a id="advanced-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Advanced Usage<a href="#advanced-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="modals-and-dialogs" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Modals and dialogs<a href="#modals-and-dialogs" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>This package no longer provides modal components. Instead, it focuses on a directive that is simple to use in different ways and encourages users to implement their own modals.</p>
<p>One recommended approach is to use the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog"><code>dialog</code></a> element and its <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/showModal"><code>showModal</code></a> method,
which can be accessed using <a href="https://lit.dev/docs/templates/directives/#referencing-rendered-dom">Lit's <code>ref</code> directive</a>.</p>
<p>Consider the following:</p>
<pre><code class="ts"><span class="hl-2">// example-app.ts</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">LitElement</span><span class="hl-1">, </span><span class="hl-0">html</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">customElement</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit/decorators.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">ref</span><span class="hl-1">, </span><span class="hl-0">createRef</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit/directives/ref.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">portal</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit-modal-portal&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">import</span><span class="hl-1"> </span><span class="hl-9">&#39;./lit-dialog&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-10">customElement</span><span class="hl-1">(</span><span class="hl-9">&#39;example-app&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-11">class</span><span class="hl-1"> </span><span class="hl-12">ExampleApp</span><span class="hl-1"> </span><span class="hl-11">extends</span><span class="hl-1"> </span><span class="hl-12">LitElement</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">dialogRef</span><span class="hl-1"> = </span><span class="hl-10">createRef</span><span class="hl-1">&lt;</span><span class="hl-12">HTMLDialogElement</span><span class="hl-1">&gt;();</span><br/><br/><span class="hl-1">  </span><span class="hl-10">render</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-10">html</span><span class="hl-9">`</span><br/><span class="hl-9">      &lt;h1&gt;lit-modal-portal Dialog Example&lt;/h1&gt;</span><br/><span class="hl-9">      &lt;button @click=</span><span class="hl-11">${</span><span class="hl-6">() </span><span class="hl-11">=&gt;</span><span class="hl-6"> </span><span class="hl-11">this</span><span class="hl-6">.</span><span class="hl-0">dialogRef</span><span class="hl-6">.</span><span class="hl-0">value</span><span class="hl-6">?.</span><span class="hl-10">showModal</span><span class="hl-6">()</span><span class="hl-11">}</span><span class="hl-9">&gt;Show Dialog&lt;/button&gt;</span><br/><span class="hl-9">      </span><span class="hl-11">${</span><span class="hl-10">portal</span><span class="hl-6">(</span><span class="hl-10">html</span><span class="hl-9">`&lt;lit-dialog .dialogRef=</span><span class="hl-11">${</span><span class="hl-11">this</span><span class="hl-6">.</span><span class="hl-0">dialogRef</span><span class="hl-11">}</span><span class="hl-9">&gt;&lt;/lit-dialog&gt;`</span><span class="hl-6">, </span><span class="hl-0">document</span><span class="hl-6">.</span><span class="hl-0">body</span><span class="hl-6">)</span><span class="hl-11">}</span><br/><span class="hl-9">    `</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<pre><code class="ts"><span class="hl-2">// lit-dialog.ts</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">LitElement</span><span class="hl-1">, </span><span class="hl-0">html</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">customElement</span><span class="hl-1">, </span><span class="hl-0">property</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit/decorators.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">ref</span><span class="hl-1">, </span><span class="hl-0">createRef</span><span class="hl-1">, </span><span class="hl-0">Ref</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit/directives/ref.js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-10">customElement</span><span class="hl-1">(</span><span class="hl-9">&#39;lit-dialog&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-11">class</span><span class="hl-1"> </span><span class="hl-12">LitDialog</span><span class="hl-1"> </span><span class="hl-11">extends</span><span class="hl-1"> </span><span class="hl-12">LitElement</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-10">property</span><span class="hl-1">({ </span><span class="hl-0">attribute:</span><span class="hl-1"> </span><span class="hl-11">false</span><span class="hl-1"> })</span><br/><span class="hl-1">  </span><span class="hl-0">dialogRef</span><span class="hl-1">: </span><span class="hl-12">Ref</span><span class="hl-1">&lt;</span><span class="hl-12">HTMLDialogElement</span><span class="hl-1">&gt; = </span><span class="hl-10">createRef</span><span class="hl-1">();</span><br/><br/><span class="hl-1">  </span><span class="hl-10">render</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-10">html</span><span class="hl-9">`</span><br/><span class="hl-9">      &lt;dialog </span><span class="hl-11">${</span><span class="hl-10">ref</span><span class="hl-6">(</span><span class="hl-11">this</span><span class="hl-6">.</span><span class="hl-0">dialogRef</span><span class="hl-6">)</span><span class="hl-11">}</span><span class="hl-9">&gt;</span><br/><span class="hl-9">        &lt;p&gt;This is the dialog&lt;/p&gt;</span><br/><span class="hl-9">        &lt;button @click=</span><span class="hl-11">${</span><span class="hl-6">() </span><span class="hl-11">=&gt;</span><span class="hl-6"> </span><span class="hl-11">this</span><span class="hl-6">.</span><span class="hl-0">dialogRef</span><span class="hl-6">.</span><span class="hl-0">value</span><span class="hl-6">?.</span><span class="hl-10">close</span><span class="hl-6">()</span><span class="hl-11">}</span><span class="hl-9">&gt;Close Dialog&lt;/button&gt;</span><br/><span class="hl-9">      &lt;/dialog&gt;</span><br/><span class="hl-9">    `</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>In this example, we have a <code>&lt;lit-dialog&gt;</code> component that accepts a <code>dialogRef</code> from the parent <code>&lt;example-app&gt;</code>.
This allows the parent to open the dialog and the child to imperatively close it on a button's <code>@click</code> event.</p>
<p>This basic pattern can be extended as necessary. Examples include:</p>
<ul>
<li>Listening to the dialog's <code>close</code> event, which would trigger if the dialog was closed with the Escape key.</li>
<li>Adding styles to the <code>&lt;lit-dialog&gt;</code> component.</li>
<li>Adding callback function properties to <code>&lt;lit-dialog&gt;</code>.</li>
<li>Using slotted content in the dialog component's template.</li>
</ul>
<a id="targeting-elements-in-the-shadow-dom" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Targeting elements in the Shadow DOM<a href="#targeting-elements-in-the-shadow-dom" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Using a DOM node in a Lit component as a target for a portal is tricky (and perhaps useless or inadvisable), for a number of reasons:</p>
<ol>
<li>The <code>querySelector</code> method does not penetrate through the shadow root, so running queries on the <code>document</code> node won't return anything.</li>
<li>The <code>portal</code> directive is <em>asynchronous</em>, so if it renders at the same time as the component's first render, <em>then the target might not even exist yet</em>.</li>
</ol>
<p>We cannot simply call <code>querySelector</code> on a different render root, such as a component's shadow root, because it might be empty. However, this is still possible to accomplish safely with the use of <a href="https://lit.dev/docs/api/decorators/#queryAsync">Lit's <code>queryAsync</code> decorator</a>.</p>
<pre><code class="ts"><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">LitElement</span><span class="hl-1">, </span><span class="hl-0">html</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">customElement</span><span class="hl-1">, </span><span class="hl-0">queryAsync</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit/decorators.js&#39;</span><span class="hl-1">;</span><br/><span class="hl-8">import</span><span class="hl-1"> { </span><span class="hl-0">portal</span><span class="hl-1"> } </span><span class="hl-8">from</span><span class="hl-1"> </span><span class="hl-9">&#39;lit-modal-portal&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">@</span><span class="hl-10">customElement</span><span class="hl-1">(</span><span class="hl-9">&#39;example-component&#39;</span><span class="hl-1">)</span><br/><span class="hl-8">export</span><span class="hl-1"> </span><span class="hl-11">class</span><span class="hl-1"> </span><span class="hl-12">ExampleComponent</span><span class="hl-1"> </span><span class="hl-11">extends</span><span class="hl-1"> </span><span class="hl-12">LitElement</span><span class="hl-1"> {</span><br/><span class="hl-1">  @</span><span class="hl-10">queryAsync</span><span class="hl-1">(</span><span class="hl-9">&#39;#portal-target&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-0">portalTarget</span><span class="hl-1">: </span><span class="hl-12">Promise</span><span class="hl-1">&lt;</span><span class="hl-12">HTMLElement</span><span class="hl-1">&gt;;</span><br/><br/><span class="hl-1">  </span><span class="hl-10">render</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-10">html</span><span class="hl-9">`&lt;div&gt;</span><br/><span class="hl-9">      </span><span class="hl-11">${</span><span class="hl-10">portal</span><span class="hl-6">(</span><span class="hl-10">html</span><span class="hl-9">`&lt;p&gt;Portal content&lt;/p&gt;`</span><span class="hl-6">, </span><span class="hl-11">this</span><span class="hl-6">.</span><span class="hl-0">portalTarget</span><span class="hl-6">)</span><span class="hl-11">}</span><br/><span class="hl-9">      &lt;p&gt;The portal isn&#39;t rendered before this paragraph, but in the following div.&lt;/p&gt;</span><br/><span class="hl-9">      &lt;div id=&quot;portal-target&quot;&gt;&lt;/div&gt;</span><br/><span class="hl-9">    &lt;/div&gt;`</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>In this example, <code>this.portalTarget</code> is a promise that resolves to the <code>&lt;div id=&quot;portal-target&gt;</code> element after the <code>&lt;example-component&gt;</code> renders.</p>
<p>See <a href="https://lit.dev/docs/components/shadow-dom/">Lit's documentation</a> for more information on components and the Shadow DOM.</p>
<a id="styling-portal-content" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Styling portal content<a href="#styling-portal-content" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Another consquence of the Shadow DOM is that only <a href="https://lit.dev/docs/components/styles/#inheritance">inherited CSS properties</a> affect elements inside a shadow root. Coupled with the fact that a portal serves to render content in a different location, this makes it difficult for a component that uses the <code>portal</code> directive to style the portal's content.</p>
<p><strong>It is recommended that the content of a portal should be another Lit component that can own its CSS.</strong> Alternatively, the <a href="https://lit.dev/docs/templates/directives/#stylemap"><code>styleMap</code> directive</a> can be used in the template provided to the <code>portal</code> directive.</p>
<p>See <a href="https://lit.dev/docs/components/styles/#shadow-dom">Lit's documentation</a> for more information on working with CSS styles and the Shadow DOM.</p>
<a id="documentation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Documentation<a href="#documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>More in-depth documentation for this package is included in the repo, under the <code>/docs</code> directory.
It is also <a href="https://nicholas-wilcox.github.io/lit-modal-portal/index.html">hosted on GitHub Pages</a>.</p>
<p>The documentation is generated using <a href="https://typedoc.org/">TypeDoc</a>.
Please note the separate <code>docs.tsconfig.json</code> and <code>src/docs.index.ts</code> files if you plan to make changes related to the documentation.</p>
<a id="development" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Development<a href="#development" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>For demonstration and testing purposes, you can start a local development server by running <code>npm run dev</code>.
There are multiple examples of the <code>portal</code> directive that explain its features and supported usage.</p>
<p>The default host is <code>localhost:8000</code>, and you may override the port number by setting the PORT environment variable.</p>
<p>The development server is <a href="https://modern-web.dev/docs/dev-server/overview/">Modern Web's server</a>,
running in watch mode, so you can see code changes reloaded into the browser automatically.
Note the middleware in <code>web-dev-server.config.mjs</code> that rewrites requests for the root so that <code>dev/index.html</code> is served.</p>
<a id="testing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Testing<a href="#testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>There are some tests for the <code>portal</code> directive in <code>src/portal.test.ts</code>. They use <a href="https://modern-web.dev/guides/test-runner/getting-started/">Modern Web's test runner</a> and the <a href="https://open-wc.org/guides/developing-components/testing/">Open Web Components <code>@open-wc/testing</code></a> framework.</p>
<p>You can execute the tests by running <code>npm run test</code>.</p>
<a id="contributing-and-bug-reports" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Contributing and Bug Reports<a href="#contributing-and-bug-reports" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Currently, there is no standard procedure for contributing to this project.
You are absolutely welcome to fork the repository and make a pull request,
and to file issues if you encounter problems while using it.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#lit-modal-portal"><span>lit-<wbr/>modal-<wbr/>portal</span></a><ul><li><a href="#warning-notice-on-version-06"><span>:warning: <wbr/>Notice on version 0.6</span></a></li><li><a href="#installation-and-usage"><span>Installation and <wbr/>Usage</span></a></li><li><a href="#api"><span>API</span></a></li><li><a href="#advanced-usage"><span>Advanced <wbr/>Usage</span></a></li><li><ul><li><a href="#modals-and-dialogs"><span>Modals and dialogs</span></a></li><li><a href="#targeting-elements-in-the-shadow-dom"><span>Targeting elements in the <wbr/>Shadow DOM</span></a></li><li><a href="#styling-portal-content"><span>Styling portal content</span></a></li></ul></li><li><a href="#documentation"><span>Documentation</span></a></li><li><a href="#development"><span>Development</span></a></li><li><ul><li><a href="#testing"><span>Testing</span></a></li></ul></li><li><a href="#contributing-and-bug-reports"><span>Contributing and <wbr/>Bug <wbr/>Reports</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">Lit Modal Portal Documentation</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
